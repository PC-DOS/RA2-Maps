SCP-EQ-Tools_enhancing_decisions_state_operations_category = {

    # On-map decisions
    SCP-EQ-Tools_enhancing_decisions_state_operations_mark_this_state = {
        state_target = yes
        target_array = global.states
        visible = {
            ROOT = {
                has_country_flag = SCP-EQ-Tools_enhancing_decisions_state_operations_enabled
            }
            FROM = {
                NOT = {
                    has_state_flag = SCP-EQ-Tools_enhancing_decisions_state_operations_is_this_state_marked
                }
            }
        }
        on_map_mode = map_only
        icon = GFX_SCP-EQ-Tools_generic_icons_add
        fire_only_once = no
        days_re_enable = 0
        ai_will_do = {
            factor = 0
        }
        cost = 0
        complete_effect = {
            FROM = {
                set_state_flag = SCP-EQ-Tools_enhancing_decisions_state_operations_is_this_state_marked
            }
        }
    }
    SCP-EQ-Tools_enhancing_decisions_state_operations_unmark_this_state = {
        state_target = yes
        target_array = global.states
        visible = {
            ROOT = {
                has_country_flag = SCP-EQ-Tools_enhancing_decisions_state_operations_enabled
            }
            FROM = {
                has_state_flag = SCP-EQ-Tools_enhancing_decisions_state_operations_is_this_state_marked
            }
        }
        on_map_mode = map_only
        icon = GFX_SCP-EQ-Tools_generic_icons_minus
        fire_only_once = no
        days_re_enable = 0
        ai_will_do = {
            factor = 0
        }
        cost = 0
        complete_effect = {
            FROM = {
                clr_state_flag = SCP-EQ-Tools_enhancing_decisions_state_operations_is_this_state_marked
            }
        }
    }
    
    # Generic operations
    SCP-EQ-Tools_enhancing_decisions_state_operations_clear_all_marks = {
        allowed = {
            # Always allowed
        }
        visible = {
            has_country_flag = SCP-EQ-Tools_enhancing_decisions_state_operations_enabled
        }
        available = {
            # Always available
        }
        icon = GFX_SCP-EQ-Tools_generic_icons_SCP_1_Generic_Small
        fire_only_once = no
        days_re_enable = 0
        ai_will_do = {
            factor = 0
        }
        complete_effect = {
            every_state = {
                limit = {
                    has_state_flag = SCP-EQ-Tools_enhancing_decisions_state_operations_is_this_state_marked
                }
                clr_state_flag = SCP-EQ-Tools_enhancing_decisions_state_operations_is_this_state_marked
            }
        }
    }
    SCP-EQ-Tools_enhancing_decisions_state_operations_own_marked_states = {
        allowed = {
            # Always allowed
        }
        visible = {
            has_country_flag = SCP-EQ-Tools_enhancing_decisions_state_operations_enabled
        }
        available = {
            # Always available
        }
        icon = GFX_SCP-EQ-Tools_generic_icons_SCP_1_Generic_Small
        fire_only_once = no
        days_re_enable = 0
        ai_will_do = {
            factor = 0
        }
        complete_effect = {
            every_state = {
                limit = {
                    has_state_flag = SCP-EQ-Tools_enhancing_decisions_state_operations_is_this_state_marked
                }
                # set_state_owner (country scope) or set_state_owner_to (state scope) may cause problems
                # Using transfer_state_to is recommended
                # See:
                # https://hoi4.paradoxwikis.com/Effect#set_state_owner
                # https://hoi4.paradoxwikis.com/Effect#set_state_owner_to
                transfer_state_to = ROOT
            }
        }
    }
    SCP-EQ-Tools_enhancing_decisions_state_operations_control_marked_states = {
        allowed = {
            # Always allowed
        }
        visible = {
            has_country_flag = SCP-EQ-Tools_enhancing_decisions_state_operations_enabled
        }
        available = {
            # Always available
        }
        icon = GFX_SCP-EQ-Tools_generic_icons_SCP_1_Generic_Small
        fire_only_once = no
        days_re_enable = 0
        ai_will_do = {
            factor = 0
        }
        complete_effect = {
            every_state = {
                limit = {
                    has_state_flag = SCP-EQ-Tools_enhancing_decisions_state_operations_is_this_state_marked
                }
                set_state_controller_to = ROOT
            }
        }
    }
    SCP-EQ-Tools_enhancing_decisions_state_operations_add_core_on_marked_states = {
        allowed = {
            # Always allowed
        }
        visible = {
            has_country_flag = SCP-EQ-Tools_enhancing_decisions_state_operations_enabled
        }
        available = {
            # Always available
        }
        icon = GFX_SCP-EQ-Tools_generic_icons_SCP_1_Generic_Small
        fire_only_once = no
        days_re_enable = 0
        ai_will_do = {
            factor = 0
        }
        complete_effect = {
            every_state = {
                limit = {
                    has_state_flag = SCP-EQ-Tools_enhancing_decisions_state_operations_is_this_state_marked
                }
                add_core_of = ROOT
            }
        }
    }
    SCP-EQ-Tools_enhancing_decisions_state_operations_controller_add_core_on_marked_states = {
        allowed = {
            # Always allowed
        }
        visible = {
            has_country_flag = SCP-EQ-Tools_enhancing_decisions_state_operations_enabled
        }
        available = {
            # Always available
        }
        icon = GFX_SCP-EQ-Tools_generic_icons_SCP_1_Generic_Small
        fire_only_once = no
        days_re_enable = 0
        ai_will_do = {
            factor = 0
        }
        complete_effect = {
            every_state = {
                limit = {
                    has_state_flag = SCP-EQ-Tools_enhancing_decisions_state_operations_is_this_state_marked
                }
                add_core_of = controller
            }
        }
    }
    SCP-EQ-Tools_enhancing_decisions_state_operations_remove_others_core_and_claim_on_marked_states = {
        allowed = {
            # Always allowed
        }
        visible = {
            has_country_flag = SCP-EQ-Tools_enhancing_decisions_state_operations_enabled
        }
        available = {
            # Always available
        }
        icon = GFX_SCP-EQ-Tools_generic_icons_SCP_1_Generic_Small
        fire_only_once = no
        days_re_enable = 0
        ai_will_do = {
            factor = 0
        }
        complete_effect = {
            for_each_loop = {
                array = global.countries
                value = temp_current_country
                
                if = {
                    limit = {
                        NOT = {
                            check_variable = { temp_current_country = ROOT }
                        }
                    }
                    every_state = {
                        limit = {
                            has_state_flag = SCP-EQ-Tools_enhancing_decisions_state_operations_is_this_state_marked
                        }
                        remove_claim_by = temp_current_country
                        remove_core_of = temp_current_country
                    }
                }
            }
        }
    }
    SCP-EQ-Tools_enhancing_decisions_state_operations_remove_non_controllers_core_and_claim_on_marked_states = {
        allowed = {
            # Always allowed
        }
        visible = {
            has_country_flag = SCP-EQ-Tools_enhancing_decisions_state_operations_enabled
        }
        available = {
            # Always available
        }
        icon = GFX_SCP-EQ-Tools_generic_icons_SCP_1_Generic_Small
        fire_only_once = no
        days_re_enable = 0
        ai_will_do = {
            factor = 0
        }
        complete_effect = {
            for_each_loop = {
                array = global.countries
                value = temp_current_country
                
                every_state = {
                    limit = {
                        has_state_flag = SCP-EQ-Tools_enhancing_decisions_state_operations_is_this_state_marked
                    }
                    if = {
                        limit = {
                            NOT = {
                                check_variable = { temp_current_country = controller }
                            }
                        }
                        remove_claim_by = temp_current_country
                        remove_core_of = temp_current_country
                    }
                }
            }
        }
    }
    SCP-EQ-Tools_enhancing_decisions_state_operations_remove_our_core_and_claim_on_marked_states = {
        allowed = {
            # Always allowed
        }
        visible = {
            has_country_flag = SCP-EQ-Tools_enhancing_decisions_state_operations_enabled
        }
        available = {
            # Always available
        }
        icon = GFX_SCP-EQ-Tools_generic_icons_SCP_1_Generic_Small
        fire_only_once = no
        days_re_enable = 0
        ai_will_do = {
            factor = 0
        }
        complete_effect = {
            every_state = {
                limit = {
                    has_state_flag = SCP-EQ-Tools_enhancing_decisions_state_operations_is_this_state_marked
                }
                remove_claim_by = ROOT
                remove_core_of = ROOT
            }
        }
    }
    SCP-EQ-Tools_enhancing_decisions_state_operations_remove_current_controller_core_and_claim_on_marked_states = {
        allowed = {
            # Always allowed
        }
        visible = {
            has_country_flag = SCP-EQ-Tools_enhancing_decisions_state_operations_enabled
        }
        available = {
            # Always available
        }
        icon = GFX_SCP-EQ-Tools_generic_icons_SCP_1_Generic_Small
        fire_only_once = no
        days_re_enable = 0
        ai_will_do = {
            factor = 0
        }
        complete_effect = {
            every_state = {
                limit = {
                    has_state_flag = SCP-EQ-Tools_enhancing_decisions_state_operations_is_this_state_marked
                }
                remove_claim_by = controller
                remove_core_of = controller
            }
        }
    }
    SCP-EQ-Tools_enhancing_decisions_state_operations_remove_current_controller_core_and_claim_on_all_marked_states = {
        allowed = {
            # Always allowed
        }
        visible = {
            has_country_flag = SCP-EQ-Tools_enhancing_decisions_state_operations_enabled
        }
        available = {
            # Always available
        }
        icon = GFX_SCP-EQ-Tools_generic_icons_SCP_1_Generic_Small
        fire_only_once = no
        days_re_enable = 0
        ai_will_do = {
            factor = 0
        }
        complete_effect = {
            every_state = {
                limit = {
                    has_state_flag = SCP-EQ-Tools_enhancing_decisions_state_operations_is_this_state_marked
                }
                controller = {
                    every_state = {
                        limit = {
                            has_state_flag = SCP-EQ-Tools_enhancing_decisions_state_operations_is_this_state_marked
                        }
                        remove_claim_by = PREV
                        remove_core_of = PREV
                    }
                }
            }
        }
    }
    SCP-EQ-Tools_enhancing_decisions_state_operations_transfer_marked_states_to_random_country_with_claim = {
        allowed = {
            # Always allowed
        }
        visible = {
            has_country_flag = SCP-EQ-Tools_enhancing_decisions_state_operations_enabled
        }
        available = {
            # Always available
        }
        icon = GFX_SCP-EQ-Tools_generic_icons_SCP_1_Generic_Small
        fire_only_once = no
        days_re_enable = 0
        ai_will_do = {
            factor = 0
        }
        complete_effect = {
            every_state = {
                limit = {
                    has_state_flag = SCP-EQ-Tools_enhancing_decisions_state_operations_is_this_state_marked
                }
                
                set_temp_variable = { temp_current_state = THIS }
                # Determine countries who claims but is not controlling this state
                clear_temp_array = temp_arr_possible_new_owners
                every_possible_country = {
                    set_temp_variable = { temp_current_country = THIS }
                    if = {
                        limit = {
                            var:temp_current_state = {
                                NOT = { is_controlled_by = var:temp_current_country }
                                OR = {
                                    is_core_of = var:temp_current_country
                                    is_claimed_by = var:temp_current_country
                                }
                            }
                        }
                        add_to_temp_array = { temp_arr_possible_new_owners = temp_current_country }
                    }
                }
                # Select new owner
                if = {
                    limit = {
                        check_variable = { temp_arr_possible_new_owners^num > 0 }
                    }
                    set_temp_variable_to_random = {
                        var = temp_new_owner_index
                        min = 0
                        max = temp_arr_possible_new_owners^num
                        integer = yes
                    }
                    transfer_state_to = var:temp_arr_possible_new_owners^temp_new_owner_index
                }
            }
        }
    }
    SCP-EQ-Tools_enhancing_decisions_state_operations_delete_non_allied_armies_in_marked_states = {
        allowed = {
            # Always allowed
        }
        visible = {
            has_country_flag = SCP-EQ-Tools_enhancing_decisions_state_operations_enabled
        }
        available = {
            # Always available
        }
        icon = GFX_SCP-EQ-Tools_generic_icons_SCP_1_Generic_Small
        fire_only_once = no
        days_re_enable = 0
        ai_will_do = {
            factor = 0
        }
        complete_effect = {
            every_state = {
                limit = {
                    has_state_flag = SCP-EQ-Tools_enhancing_decisions_state_operations_is_this_state_marked
                }
                every_possible_country = {
                    limit = {
                        NOT = { tag = ROOT }
                        NOT = { is_ally_with = ROOT }
                        NOT = { is_in_faction_with = ROOT }
                        NOT = { is_puppet_of = ROOT }
                        NOT = { is_subject_of = ROOT }
                    }
                    delete_unit = {
                        state = PREV
                        disband = no
                    }
                }
            }
        }
    }
    SCP-EQ-Tools_enhancing_decisions_state_operations_set_demilitarized_zone_on_marked_states = {
        allowed = {
            # Always allowed
        }
        visible = {
            has_country_flag = SCP-EQ-Tools_enhancing_decisions_state_operations_enabled
        }
        available = {
            # Always available
        }
        icon = GFX_SCP-EQ-Tools_generic_icons_SCP_1_Generic_Small
        fire_only_once = no
        days_re_enable = 0
        ai_will_do = {
            factor = 0
        }
        complete_effect = {
            every_state = {
                limit = {
                    has_state_flag = SCP-EQ-Tools_enhancing_decisions_state_operations_is_this_state_marked
                }
                set_demilitarized_zone = yes
            }
        }
    }
    SCP-EQ-Tools_enhancing_decisions_state_operations_unset_demilitarized_zone_on_marked_states = {
        allowed = {
            # Always allowed
        }
        visible = {
            has_country_flag = SCP-EQ-Tools_enhancing_decisions_state_operations_enabled
        }
        available = {
            # Always available
        }
        icon = GFX_SCP-EQ-Tools_generic_icons_SCP_1_Generic_Small
        fire_only_once = no
        days_re_enable = 0
        ai_will_do = {
            factor = 0
        }
        complete_effect = {
            every_state = {
                limit = {
                    has_state_flag = SCP-EQ-Tools_enhancing_decisions_state_operations_is_this_state_marked
                }
                set_demilitarized_zone = no
            }
        }
    }
    SCP-EQ-Tools_enhancing_decisions_state_operations_teleport_capital_armies_to_marked_states = {
        allowed = {
            # Always allowed
        }
        visible = {
            has_country_flag = SCP-EQ-Tools_enhancing_decisions_state_operations_enabled
        }
        available = {
            # Always available
        }
        icon = GFX_SCP-EQ-Tools_generic_icons_SCP_1_Generic_Small
        fire_only_once = no
        days_re_enable = 0
        ai_will_do = {
            factor = 0
        }
        complete_effect = {
            clear_temp_array = temp_param_arr_teleporting_start_states
            clear_temp_array = temp_param_arr_teleporting_target_states
            set_temp_variable = { temp_param_army_owner_types_to_be_teleported = 0 }
            add_to_temp_array = { temp_param_arr_teleporting_start_states = ROOT.capital }
            every_state = {
                limit = {
                    has_state_flag = SCP-EQ-Tools_enhancing_decisions_state_operations_is_this_state_marked
                }
                log = "Adding teleporting target [?THIS.GetName]"
                add_to_temp_array = { temp_param_arr_teleporting_target_states = THIS }
            }
            SCP-EQ-Tools_generic_scripted_effects_teleport_armies = yes
        }
    }
    SCP-EQ-Tools_enhancing_decisions_state_operations_teleport_our_armies_in_marked_states_to_capital = {
        allowed = {
            # Always allowed
        }
        visible = {
            has_country_flag = SCP-EQ-Tools_enhancing_decisions_state_operations_enabled
        }
        available = {
            # Always available
        }
        icon = GFX_SCP-EQ-Tools_generic_icons_SCP_1_Generic_Small
        fire_only_once = no
        days_re_enable = 0
        ai_will_do = {
            factor = 0
        }
        complete_effect = {
            clear_temp_array = temp_param_arr_teleporting_start_states
            clear_temp_array = temp_param_arr_teleporting_target_states
            set_temp_variable = { temp_param_army_owner_types_to_be_teleported = 2 }
            every_state = {
                limit = {
                    has_state_flag = SCP-EQ-Tools_enhancing_decisions_state_operations_is_this_state_marked
                }
                add_to_temp_array = { temp_param_arr_teleporting_start_states = THIS }
            }
            add_to_temp_array = { temp_param_arr_teleporting_target_states = ROOT.capital }
            SCP-EQ-Tools_generic_scripted_effects_teleport_armies = yes
        }
    }
    SCP-EQ-Tools_enhancing_decisions_state_operations_teleport_armies_in_marked_states_to_enemy_capitals = {
        allowed = {
            # Always allowed
        }
        visible = {
            has_country_flag = SCP-EQ-Tools_enhancing_decisions_state_operations_enabled
        }
        available = {
            # Always available
        }
        icon = GFX_SCP-EQ-Tools_generic_icons_SCP_1_Generic_Small
        fire_only_once = no
        days_re_enable = 0
        ai_will_do = {
            factor = 0
        }
        complete_effect = {
            every_state = {
                limit = {
                    has_state_flag = SCP-EQ-Tools_enhancing_decisions_state_operations_is_this_state_marked
                }
                clear_temp_array = temp_param_arr_teleporting_start_states
                clear_temp_array = temp_param_arr_teleporting_target_states
                set_temp_variable = { temp_param_army_owner_types_to_be_teleported = 0 }
                add_to_temp_array = { temp_param_arr_teleporting_start_states = THIS }
                controller = {
                    every_enemy_country = {
                        every_controlled_state = {
                            limit = {
                                is_capital = yes
                            }
                            log = "Adding teleporting target [?THIS.GetName]"
                            add_to_temp_array = { temp_param_arr_teleporting_target_states = THIS }
                        }
                    }
                    SCP-EQ-Tools_generic_scripted_effects_teleport_armies = yes
                }
            }
        }
    }
    SCP-EQ-Tools_enhancing_decisions_state_operations_teleport_armies_in_marked_states_to_enemy_separated_states = {
        allowed = {
            # Always allowed
        }
        visible = {
            has_country_flag = SCP-EQ-Tools_enhancing_decisions_state_operations_enabled
        }
        available = {
            # Always available
        }
        icon = GFX_SCP-EQ-Tools_generic_icons_SCP_1_Generic_Small
        fire_only_once = no
        days_re_enable = 0
        ai_will_do = {
            factor = 0
        }
        complete_effect = {
            every_state = {
                limit = {
                    has_state_flag = SCP-EQ-Tools_enhancing_decisions_state_operations_is_this_state_marked
                }
                clear_temp_array = temp_param_arr_teleporting_start_states
                clear_temp_array = temp_param_arr_teleporting_target_states
                set_temp_variable = { temp_param_army_owner_types_to_be_teleported = 0 }
                add_to_temp_array = { temp_param_arr_teleporting_start_states = THIS }
                controller = {
                    every_enemy_country = {
                        every_controlled_state = {
                            limit = {
                                AND = {
                                    is_demilitarized_zone = no
                                    OR = {
                                        is_capital = yes
                                        is_in_home_area = no
                                    }
                                }
                            }
                            log = "Adding teleporting target [?THIS.GetName]"
                            add_to_temp_array = { temp_param_arr_teleporting_target_states = THIS }
                        }
                    }
                    SCP-EQ-Tools_generic_scripted_effects_teleport_armies = yes
                }
            }
        }
    }
    SCP-EQ-Tools_enhancing_decisions_state_operations_create_our_unit_in_marked_states = {
        allowed = {
            # Always allowed
        }
        visible = {
            has_country_flag = SCP-EQ-Tools_enhancing_decisions_state_operations_enabled
        }
        available = {
            # Always available
        }
        icon = GFX_SCP-EQ-Tools_generic_icons_SCP_1_Generic_Small
        fire_only_once = no
        days_re_enable = 0
        ai_will_do = {
            factor = 0
        }
        complete_effect = {
            every_state = {
                limit = {
                    has_state_flag = SCP-EQ-Tools_enhancing_decisions_state_operations_is_this_state_marked
                }
                set_temp_variable = { temp_param_division_owner = ROOT }
                set_temp_variable = { temp_param_division_count = 25 }
                set_temp_variable = { temp_param_division_spawn_state = THIS }
                SCP-EQ-Tools_generic_scripted_effects_create_generic_division_1 = yes
            }
        }
    }
    SCP-EQ-Tools_enhancing_decisions_state_operations_create_owner_unit_in_marked_states = {
        allowed = {
            # Always allowed
        }
        visible = {
            has_country_flag = SCP-EQ-Tools_enhancing_decisions_state_operations_enabled
        }
        available = {
            # Always available
        }
        icon = GFX_SCP-EQ-Tools_generic_icons_SCP_1_Generic_Small
        fire_only_once = no
        days_re_enable = 0
        ai_will_do = {
            factor = 0
        }
        complete_effect = {
            every_state = {
                limit = {
                    has_state_flag = SCP-EQ-Tools_enhancing_decisions_state_operations_is_this_state_marked
                }
                set_temp_variable = { temp_param_division_owner = controller }
                set_temp_variable = { temp_param_division_count = 25 }
                set_temp_variable = { temp_param_division_spawn_state = THIS }
                SCP-EQ-Tools_generic_scripted_effects_create_generic_division_1 = yes
            }
        }
    }
    SCP-EQ-Tools_enhancing_decisions_state_operations_marked_states_controllers_enable_SCP_items = {
        allowed = {
            # Always allowed
        }
        visible = {
            has_country_flag = SCP-EQ-Tools_enhancing_decisions_state_operations_enabled
        }
        available = {
            # Always available
        }
        icon = GFX_SCP-EQ-Tools_generic_icons_SCP_1_Generic_Small
        fire_only_once = no
        days_re_enable = 0
        ai_will_do = {
            factor = 0
        }
        complete_effect = {
            every_state = {
                limit = {
                    has_state_flag = SCP-EQ-Tools_enhancing_decisions_state_operations_is_this_state_marked
                }
                controller = {
                    set_country_flag = SCP-EQ-Tools_enhancing_decisions_state_operations_marked_states_controllers_SCP_item_1_enabled
                    # Generic
                    SCP-EQ-Tools_generic_scripted_effects_enable_SCP_item_1 = yes
                    SCP-EQ-Tools_generic_scripted_effects_enable_SCP_item_1_production = yes
                    SCP-EQ-Tools_generic_scripted_effects_enable_SCP_item_1_army = yes
                    SCP-EQ-Tools_generic_scripted_effects_enable_SCP_item_1_naval = yes
                    SCP-EQ-Tools_generic_scripted_effects_enable_SCP_item_1_air = yes
                    SCP-EQ-Tools_generic_scripted_effects_enable_SCP_item_1_state_supplies_for_all_controlled_states = yes
                    # EaW
                    if = {
                        limit = {
                            ROOT = {
                                has_country_flag = SCP-EQ-Tools_enhancing_decisions_EAW_decisions_enabled
                            }
                        }
                        SCP-EQ-Tools_generic_scripted_effects_EAW_enable_SCP_item_1 = yes
                    }
                    # TFR
                    if = {
                        limit = {
                            ROOT = {
                                has_country_flag = SCP-EQ-Tools_enhancing_decisions_TFR_decisions_enabled
                            }
                        }
                        SCP-EQ-Tools_generic_scripted_effects_TFR_enable_SCP_item_1 = yes
                        # Allow AI's production
                        remove_ideas = ai_disabled_production
                        country_lock_all_division_template = no
                    }
                    # TNO
                    if = {
                        limit = {
                            ROOT = {
                                has_country_flag = SCP-EQ-Tools_enhancing_decisions_TNO_decisions_enabled
                            }
                        }
                        SCP-EQ-Tools_generic_scripted_effects_TNO_enable_SCP_item_1 = yes
                    }
                }
            }
        }
    }
    SCP-EQ-Tools_enhancing_decisions_state_operations_marked_states_controllers_disable_SCP_items = {
        allowed = {
            # Always allowed
        }
        visible = {
            has_country_flag = SCP-EQ-Tools_enhancing_decisions_state_operations_enabled
        }
        available = {
            # Always available
        }
        icon = GFX_SCP-EQ-Tools_generic_icons_SCP_1_Generic_Small
        fire_only_once = no
        days_re_enable = 0
        ai_will_do = {
            factor = 0
        }
        complete_effect = {
            every_other_country = {
                limit = {
                    has_country_flag = SCP-EQ-Tools_enhancing_decisions_state_operations_marked_states_controllers_SCP_item_1_enabled
                }
                clr_country_flag = SCP-EQ-Tools_enhancing_decisions_state_operations_marked_states_controllers_SCP_item_1_enabled
                # Generic
                SCP-EQ-Tools_generic_scripted_effects_disable_SCP_item_1 = yes
                SCP-EQ-Tools_generic_scripted_effects_disable_SCP_item_1_production = yes
                SCP-EQ-Tools_generic_scripted_effects_disable_SCP_item_1_army = yes
                SCP-EQ-Tools_generic_scripted_effects_disable_SCP_item_1_naval = yes
                SCP-EQ-Tools_generic_scripted_effects_disable_SCP_item_1_air = yes
                # EaW
                SCP-EQ-Tools_generic_scripted_effects_EAW_disable_SCP_item_1 = yes
                # TFR
                SCP-EQ-Tools_generic_scripted_effects_TFR_disable_SCP_item_1 = yes
                # TNO
                SCP-EQ-Tools_generic_scripted_effects_TNO_disable_SCP_item_1 = yes
            }
        }
    }
    SCP-EQ-Tools_enhancing_decisions_state_operations_marked_states_controllers_win_wars = {
        allowed = {
            # Always allowed
        }
        visible = {
            has_country_flag = SCP-EQ-Tools_enhancing_decisions_state_operations_enabled
        }
        available = {
            # Always available
        }
        icon = GFX_SCP-EQ-Tools_generic_icons_SCP_1_Generic_Small
        fire_only_once = no
        days_re_enable = 0
        ai_will_do = {
            factor = 0
        }
        complete_effect = {
            every_state = {
                limit = {
                    has_state_flag = SCP-EQ-Tools_enhancing_decisions_state_operations_is_this_state_marked
                }
                controller = {
                    SCP-EQ-Tools_generic_scripted_effects_delete_all_enemy_units = yes
                    SCP-EQ-Tools_generic_scripted_effects_control_all_enemy_controlled_states = yes
                }
            }
        }
    }
    SCP-EQ-Tools_enhancing_decisions_state_operations_white_peace_with_marked_states_controllers = {
        allowed = {
            # Always allowed
        }
        visible = {
            has_country_flag = SCP-EQ-Tools_enhancing_decisions_state_operations_enabled
        }
        available = {
            # Always available
        }
        icon = GFX_SCP-EQ-Tools_generic_icons_SCP_1_Generic_Small
        fire_only_once = no
        days_re_enable = 0
        ai_will_do = {
            factor = 0
        }
        complete_effect = {
            every_state = {
                limit = {
                    has_state_flag = SCP-EQ-Tools_enhancing_decisions_state_operations_is_this_state_marked
                }
                controller = {
                    white_peace = ROOT
                }
            }
        }
    }
    SCP-EQ-Tools_enhancing_decisions_state_operations_marked_states_controllers_white_peace_with_all_enemies = {
        allowed = {
            # Always allowed
        }
        visible = {
            has_country_flag = SCP-EQ-Tools_enhancing_decisions_state_operations_enabled
        }
        available = {
            # Always available
        }
        icon = GFX_SCP-EQ-Tools_generic_icons_SCP_1_Generic_Small
        fire_only_once = no
        days_re_enable = 0
        ai_will_do = {
            factor = 0
        }
        complete_effect = {
            every_state = {
                limit = {
                    has_state_flag = SCP-EQ-Tools_enhancing_decisions_state_operations_is_this_state_marked
                }
                controller = {
                    every_enemy_country = {
                        white_peace = PREV
                    }
                }
            }
        }
    }
    SCP-EQ-Tools_enhancing_decisions_state_operations_start_peace_conference_with_marked_states_controllers = {
        allowed = {
            # Always allowed
        }
        visible = {
            has_country_flag = SCP-EQ-Tools_enhancing_decisions_state_operations_enabled
        }
        available = {
            # Always available
        }
        icon = GFX_SCP-EQ-Tools_generic_icons_SCP_1_Generic_Small
        fire_only_once = no
        days_re_enable = 0
        ai_will_do = {
            factor = 0
        }
        complete_effect = {
            every_state = {
                limit = {
                    has_state_flag = SCP-EQ-Tools_enhancing_decisions_state_operations_is_this_state_marked
                }
                controller = {
                    ROOT = {
                        # Current scope is the winner, target and its subjects are the losers
                        start_peace_conference  = {
                            tag = PREV
                            score_factor = 245.0
                            winner_scope = LIMITED_FACTION
                            loser_scope = LIMITED_FACTION
                        }
                    }
                }
            }
        }
    }
    SCP-EQ-Tools_enhancing_decisions_state_operations_marked_states_controllers_start_peace_conference_with_all_enemies = {
        allowed = {
            # Always allowed
        }
        visible = {
            has_country_flag = SCP-EQ-Tools_enhancing_decisions_state_operations_enabled
        }
        available = {
            # Always available
        }
        icon = GFX_SCP-EQ-Tools_generic_icons_SCP_1_Generic_Small
        fire_only_once = no
        days_re_enable = 0
        ai_will_do = {
            factor = 0
        }
        complete_effect = {
            every_state = {
                limit = {
                    has_state_flag = SCP-EQ-Tools_enhancing_decisions_state_operations_is_this_state_marked
                }
                controller = {
                    random_enemy_country = {
                        PREV = {
                            # Current scope is the winner, target and its subjects are the losers
                            start_peace_conference  = {
                                tag = PREV
                                score_factor = 245.0
                                winner_scope = LIMITED_FACTION
                                loser_scope = ALL
                            }
                        }
                    }
                }
            }
        }
    }
    SCP-EQ-Tools_enhancing_decisions_state_operations_nuke_marked_states = {
        allowed = {
            # Always allowed
        }
        visible = {
            has_country_flag = SCP-EQ-Tools_enhancing_decisions_state_operations_enabled
        }
        available = {
            # Always available
        }
        icon = GFX_SCP-EQ-Tools_generic_icons_SCP_1_Generic_Small
        fire_only_once = no
        days_re_enable = 0
        ai_will_do = {
            factor = 0
        }
        complete_effect = {
            every_state = {
                limit = {
                    has_state_flag = SCP-EQ-Tools_enhancing_decisions_state_operations_is_this_state_marked
                }
                set_temp_variable = { temp_param_nuke_target_tag = controller }
                set_temp_variable = { temp_param_nuke_sender_tag = ROOT }
                set_temp_variable = { temp_param_nuke_target_state = THIS }
                set_temp_variable = { temp_param_is_advanced_nuking_enabled = 1 }
                SCP-EQ-Tools_generic_scripted_effects_nuke_specified_state = yes
            }
        }
    }
    SCP-EQ-Tools_enhancing_decisions_state_operations_nuke_marked_states_controllers = {
        allowed = {
            # Always allowed
        }
        visible = {
            has_country_flag = SCP-EQ-Tools_enhancing_decisions_state_operations_enabled
        }
        available = {
            # Always available
        }
        icon = GFX_SCP-EQ-Tools_generic_icons_SCP_1_Generic_Small
        fire_only_once = no
        days_re_enable = 0
        ai_will_do = {
            factor = 0
        }
        complete_effect = {
            every_state = {
                limit = {
                    has_state_flag = SCP-EQ-Tools_enhancing_decisions_state_operations_is_this_state_marked
                }
                set_temp_variable = { temp_param_nuke_target_tag = controller }
                set_temp_variable = { temp_param_nuke_sender_tag = ROOT }
                set_temp_variable = { temp_param_is_every_province_nuked = 1 }
                set_temp_variable = { temp_param_is_advanced_nuking_enabled = 1 }
                SCP-EQ-Tools_generic_scripted_effects_nuke_all_controlled_states = yes
            }
        }
    }
    SCP-EQ-Tools_enhancing_decisions_state_operations_delete_all_marked_states_controllers_armies = {
        allowed = {
            # Always allowed
        }
        visible = {
            has_country_flag = SCP-EQ-Tools_enhancing_decisions_state_operations_enabled
        }
        available = {
            # Always available
        }
        icon = GFX_SCP-EQ-Tools_generic_icons_SCP_1_Generic_Small
        fire_only_once = no
        days_re_enable = 0
        ai_will_do = {
            factor = 0
        }
        complete_effect = {
            every_state = {
                limit = {
                    has_state_flag = SCP-EQ-Tools_enhancing_decisions_state_operations_is_this_state_marked
                }
                controller = {
                    SCP-EQ-Tools_generic_scripted_effects_delete_all_units = yes
                }
            }
        }
    }
    SCP-EQ-Tools_enhancing_decisions_state_operations_annex_marked_states_controllers = {
        allowed = {
            # Always allowed
        }
        visible = {
            has_country_flag = SCP-EQ-Tools_enhancing_decisions_state_operations_enabled
        }
        available = {
            # Always available
        }
        icon = GFX_SCP-EQ-Tools_generic_icons_SCP_1_Generic_Small
        fire_only_once = no
        days_re_enable = 0
        ai_will_do = {
            factor = 0
        }
        complete_effect = {
            every_state = {
                limit = {
                    has_state_flag = SCP-EQ-Tools_enhancing_decisions_state_operations_is_this_state_marked
                    NOT = {
                        is_controlled_by = ROOT
                    }
                }
                controller = {
                    ROOT = {
                        annex_country = {
                            target = PREV
                            transfer_troops = yes
                        }
                    }
                }
            }
        }
    }
    SCP-EQ-Tools_enhancing_decisions_state_operations_puppet_marked_states_controllers = {
        allowed = {
            # Always allowed
        }
        visible = {
            has_country_flag = SCP-EQ-Tools_enhancing_decisions_state_operations_enabled
        }
        available = {
            # Always available
        }
        icon = GFX_SCP-EQ-Tools_generic_icons_SCP_1_Generic_Small
        fire_only_once = no
        days_re_enable = 0
        ai_will_do = {
            factor = 0
        }
        complete_effect = {
            every_state = {
                limit = {
                    has_state_flag = SCP-EQ-Tools_enhancing_decisions_state_operations_is_this_state_marked
                    NOT = {
                        is_controlled_by = ROOT
                    }
                }
                controller = {
                    ROOT = {
                        puppet = {
                            target = PREV
                        }
                    }
                }
            }
        }
    }
    SCP-EQ-Tools_enhancing_decisions_state_operations_end_puppet_marked_states_controllers = {
        allowed = {
            # Always allowed
        }
        visible = {
            has_country_flag = SCP-EQ-Tools_enhancing_decisions_state_operations_enabled
        }
        available = {
            # Always available
        }
        icon = GFX_SCP-EQ-Tools_generic_icons_SCP_1_Generic_Small
        fire_only_once = no
        days_re_enable = 0
        ai_will_do = {
            factor = 0
        }
        complete_effect = {
            every_state = {
                limit = {
                    has_state_flag = SCP-EQ-Tools_enhancing_decisions_state_operations_is_this_state_marked
                    NOT = {
                        is_controlled_by = ROOT
                    }
                }
                controller = {
                    if = {
                        limit = {
                            is_subject = yes
                        }
                        overlord = {
                            end_puppet = PREV
                        }
                    }
                }
            }
        }
    }
    SCP-EQ-Tools_enhancing_decisions_state_operations_gain_military_access_from_marked_states_controllers = {
        allowed = {
            # Always allowed
        }
        visible = {
            has_country_flag = SCP-EQ-Tools_enhancing_decisions_state_operations_enabled
        }
        available = {
            # Always available
        }
        icon = GFX_SCP-EQ-Tools_generic_icons_SCP_1_Generic_Small
        fire_only_once = no
        days_re_enable = 0
        ai_will_do = {
            factor = 0
        }
        complete_effect = {
            every_state = {
                limit = {
                    has_state_flag = SCP-EQ-Tools_enhancing_decisions_state_operations_is_this_state_marked
                    NOT = {
                        is_controlled_by = ROOT
                    }
                }
                controller = {
                    give_military_access = ROOT
                }
            }
        }
    }
    SCP-EQ-Tools_enhancing_decisions_state_operations_remove_guarantees_of_marked_states_controllers = {
        allowed = {
            # Always allowed
        }
        visible = {
            has_country_flag = SCP-EQ-Tools_enhancing_decisions_state_operations_enabled
        }
        available = {
            # Always available
        }
        icon = GFX_SCP-EQ-Tools_generic_icons_SCP_1_Generic_Small
        fire_only_once = no
        days_re_enable = 0
        ai_will_do = {
            factor = 0
        }
        complete_effect = {
            every_state = {
                limit = {
                    has_state_flag = SCP-EQ-Tools_enhancing_decisions_state_operations_is_this_state_marked
                    NOT = {
                        is_controlled_by = ROOT
                    }
                }
                controller = {
                    every_possible_country = {
                        limit = {
                            is_ai = yes
                        }
                        diplomatic_relation = {
                            country = PREV
                            relation = guarantee
                            active = no
                        }
                    }
                }
            }
        }
    }
    SCP-EQ-Tools_enhancing_decisions_state_operations_declare_war_on_marked_states_controllers = {
        allowed = {
            # Always allowed
        }
        visible = {
            has_country_flag = SCP-EQ-Tools_enhancing_decisions_state_operations_enabled
        }
        available = {
            # Always available
        }
        icon = GFX_SCP-EQ-Tools_generic_icons_SCP_1_Generic_Small
        fire_only_once = no
        days_re_enable = 0
        ai_will_do = {
            factor = 0
        }
        complete_effect = {
            every_state = {
                limit = {
                    has_state_flag = SCP-EQ-Tools_enhancing_decisions_state_operations_is_this_state_marked
                    NOT = {
                        is_controlled_by = ROOT
                    }
                }
                controller = {
                    ROOT = {
                        declare_war_on = {
                            target = PREV
                            type = annex_everything
                        }
                    }
                }
            }
        }
    }
    SCP-EQ-Tools_enhancing_decisions_state_operations_add_to_faction_of_marked_states_controller = {
        allowed = {
            # Always allowed
        }
        visible = {
            has_country_flag = SCP-EQ-Tools_enhancing_decisions_state_operations_enabled
        }
        available = {
            # Always available
        }
        icon = GFX_SCP-EQ-Tools_generic_icons_SCP_1_Generic_Small
        fire_only_once = no
        days_re_enable = 0
        ai_will_do = {
            factor = 0
        }
        complete_effect = {
            every_state = {
                limit = {
                    has_state_flag = SCP-EQ-Tools_enhancing_decisions_state_operations_is_this_state_marked
                    NOT = {
                        is_controlled_by = ROOT
                    }
                }
                controller = {
                    faction_leader = {
                        add_to_faction = ROOT
                    }
                }
            }
        }
    }
    SCP-EQ-Tools_enhancing_decisions_state_operations_marked_states_controllers_join_our_faction = {
        allowed = {
            # Always allowed
        }
        visible = {
            has_country_flag = SCP-EQ-Tools_enhancing_decisions_state_operations_enabled
        }
        available = {
            # Always available
        }
        icon = GFX_SCP-EQ-Tools_generic_icons_SCP_1_Generic_Small
        fire_only_once = no
        days_re_enable = 0
        ai_will_do = {
            factor = 0
        }
        complete_effect = {
            every_state = {
                limit = {
                    has_state_flag = SCP-EQ-Tools_enhancing_decisions_state_operations_is_this_state_marked
                    NOT = {
                        is_controlled_by = ROOT
                    }
                }
                controller = {
                    leave_faction = yes
                    dismantle_faction = yes
                    set_temp_variable = { temp_target_country = THIS }
                    ROOT = {
                        faction_leader = {
                            add_to_faction = temp_target_country
                        }
                    }
                }
            }
        }
    }
    SCP-EQ-Tools_enhancing_decisions_state_operations_marked_states_controllers_become_leader_of_current_faction = {
        allowed = {
            # Always allowed
        }
        visible = {
            # Always visible
        }
        available = {
            # Always available
        }
        icon = GFX_SCP-EQ-Tools_generic_icons_SCP_1_Generic_Small
        fire_only_once = no
        days_re_enable = 0
        ai_will_do = {
            factor = 0
        }
        complete_effect = {
            every_state = {
                limit = {
                    has_state_flag = SCP-EQ-Tools_enhancing_decisions_state_operations_is_this_state_marked
                }
                controller = {
                    set_faction_leader = yes
                }
            }
        }
    }
    SCP-EQ-Tools_enhancing_decisions_state_operations_marked_states_controllers_become_spymaster_of_current_faction = {
        allowed = {
            # Always allowed
        }
        visible = {
            # Always visible
        }
        available = {
            # Always available
        }
        icon = GFX_SCP-EQ-Tools_generic_icons_SCP_1_Generic_Small
        fire_only_once = no
        days_re_enable = 0
        ai_will_do = {
            factor = 0
        }
        complete_effect = {
            every_state = {
                limit = {
                    has_state_flag = SCP-EQ-Tools_enhancing_decisions_state_operations_is_this_state_marked
                }
                controller = {
                    set_faction_spymaster = yes
                }
            }
        }
    }
    SCP-EQ-Tools_enhancing_decisions_state_operations_marked_states_controllers_leave_current_faction = {
        allowed = {
            # Always allowed
        }
        visible = {
            has_country_flag = SCP-EQ-Tools_enhancing_decisions_state_operations_enabled
        }
        available = {
            # Always available
        }
        icon = GFX_SCP-EQ-Tools_generic_icons_SCP_1_Generic_Small
        fire_only_once = no
        days_re_enable = 0
        ai_will_do = {
            factor = 0
        }
        complete_effect = {
            every_state = {
                limit = {
                    has_state_flag = SCP-EQ-Tools_enhancing_decisions_state_operations_is_this_state_marked
                }
                controller = {
                    leave_faction = yes
                }
            }
        }
    }
    SCP-EQ-Tools_enhancing_decisions_state_operations_marked_states_controllers_dismantle_current_faction = {
        allowed = {
            # Always allowed
        }
        visible = {
            has_country_flag = SCP-EQ-Tools_enhancing_decisions_state_operations_enabled
        }
        available = {
            # Always available
        }
        icon = GFX_SCP-EQ-Tools_generic_icons_SCP_1_Generic_Small
        fire_only_once = no
        days_re_enable = 0
        ai_will_do = {
            factor = 0
        }
        complete_effect = {
            every_state = {
                limit = {
                    has_state_flag = SCP-EQ-Tools_enhancing_decisions_state_operations_is_this_state_marked
                }
                controller = {
                    faction_leader = {
                        dismantle_faction = yes
                    }
                }
            }
        }
    }
    SCP-EQ-Tools_enhancing_decisions_state_operations_recall_volunteers_from_marked_states_controllers = {
        allowed = {
            # Always allowed
        }
        visible = {
            has_country_flag = SCP-EQ-Tools_enhancing_decisions_state_operations_enabled
        }
        available = {
            # Always available
        }
        icon = GFX_SCP-EQ-Tools_generic_icons_SCP_1_Generic_Small
        fire_only_once = no
        days_re_enable = 0
        ai_will_do = {
            factor = 0
        }
        complete_effect = {
            every_state = {
                limit = {
                    has_state_flag = SCP-EQ-Tools_enhancing_decisions_state_operations_is_this_state_marked
                    controller = {
                        has_volunteers_amount_from = {
                            tag = ROOT
                            count > 0
                        }
                        NOT = {
                            tag = ROOT
                        }
                    }
                }
                controller = {
                    ROOT = {
                        recall_volunteers_from = PREV
                    }
                }
            }
        }
    }
    SCP-EQ-Tools_enhancing_decisions_state_operations_marked_states_controllers_recall_volunteers_from_all_countries = {
        allowed = {
            # Always allowed
        }
        visible = {
            has_country_flag = SCP-EQ-Tools_enhancing_decisions_state_operations_enabled
        }
        available = {
            # Always available
        }
        icon = GFX_SCP-EQ-Tools_generic_icons_SCP_1_Generic_Small
        fire_only_once = no
        days_re_enable = 0
        ai_will_do = {
            factor = 0
        }
        complete_effect = {
            every_state = {
                limit = {
                    has_state_flag = SCP-EQ-Tools_enhancing_decisions_state_operations_is_this_state_marked
                }
                controller = {
                    every_other_country = {
                        limit = {
                            has_volunteers_amount_from = {
                                tag = PREV
                                count > 0
                            }
                        }
                        PREV = {
                            recall_volunteers_from = PREV
                        }
                    }
                }
            }
        }
    }
    SCP-EQ-Tools_enhancing_decisions_state_operations_tag_to_random_marked_state_controller = {
        allowed = {
            # Always allowed
        }
        visible = {
            has_country_flag = SCP-EQ-Tools_enhancing_decisions_state_operations_enabled
            NOT = {
                has_country_flag = SCP-EQ-Tools_enhancing_decisions_state_operations_tag_to_random_marked_state_controller_is_tagged_from_another_country
            }
        }
        available = {
            # Always available
        }
        icon = GFX_SCP-EQ-Tools_generic_icons_SCP_1_Generic_Small
        fire_only_once = no
        days_re_enable = 0
        ai_will_do = {
            factor = 0
        }
        complete_effect = {
            random_state = {
                limit = {
                    has_state_flag = SCP-EQ-Tools_enhancing_decisions_state_operations_is_this_state_marked
                    NOT = {
                        is_controlled_by = ROOT
                    }
                }
                controller = {
                    set_variable = { SCP-EQ-Tools_enhancing_decisions_state_operations_tag_to_random_marked_state_controller_source = ROOT }
                    set_country_flag = SCP-EQ-Tools_enhancing_decisions_state_operations_tag_to_random_marked_state_controller_is_tagged_from_another_country
                    set_country_flag = SCP-EQ-Tools_enhancing_decisions_state_operations_enabled
                    change_tag_from = ROOT
                }
            }
        }
    }
    SCP-EQ-Tools_enhancing_decisions_state_operations_tag_to_random_marked_state_controller_revert = {
        allowed = {
            # Always allowed
        }
        visible = {
            has_country_flag = SCP-EQ-Tools_enhancing_decisions_state_operations_enabled
            has_country_flag = SCP-EQ-Tools_enhancing_decisions_state_operations_tag_to_random_marked_state_controller_is_tagged_from_another_country
        }
        available = {
            # Always available
        }
        icon = GFX_SCP-EQ-Tools_generic_icons_SCP_1_Generic_Small
        fire_only_once = no
        days_re_enable = 0
        ai_will_do = {
            factor = 0
        }
        complete_effect = {
            if = {
                limit = {
                    has_country_flag = SCP-EQ-Tools_enhancing_decisions_state_operations_tag_to_random_marked_state_controller_is_tagged_from_another_country
                }
                set_temp_variable = { temp_tag_target = SCP-EQ-Tools_enhancing_decisions_state_operations_tag_to_random_marked_state_controller_source }
                set_temp_variable = { temp_tag_source = THIS }
                clr_country_flag = SCP-EQ-Tools_enhancing_decisions_state_operations_tag_to_random_marked_state_controller_is_tagged_from_another_country
                clr_country_flag = SCP-EQ-Tools_enhancing_decisions_state_operations_tag_to_random_marked_state_controller_source
                var:temp_tag_target = {
                    change_tag_from = var:temp_tag_source
                }
            }
        }
    }

}